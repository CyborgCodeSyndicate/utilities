version: 2

updates:
  # 1) Maven: keep your "version authority" (parent-pom) always up to date
  - package-ecosystem: "maven"
    directory: "/parent-pom"
    target-branch: "main"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "06:00"
      timezone: "Europe/Skopje"
    open-pull-requests-limit: 10
    labels: ["dependencies"]
    commit-message:
      prefix: "chore(deps)"
      include: "scope"
    groups:
      parent-pom:
        patterns:
          - "*"

  # 2) Maven: commons (only matters if commons has any explicit versions left, or its own plugins)
  #    If commons only declares deps WITHOUT versions (inherited from parent-pom), this will usually produce zero PRs.
  - package-ecosystem: "maven"
    directory: "/commons"
    target-branch: "main"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "06:10"
      timezone: "Europe/Skopje"
    open-pull-requests-limit: 10
    labels: ["dependencies"]
    commit-message:
      prefix: "chore(deps)"
      include: "scope"
    groups:
      commons:
        patterns:
          - "*"

  # 3) GitHub Actions: update marketplace actions in workflow files (.github/workflows/**)
  - package-ecosystem: "github-actions"
    directory: "/"
    target-branch: "main"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "06:20"
      timezone: "Europe/Skopje"
    open-pull-requests-limit: 10
    labels: ["dependencies", "github-actions"]
    commit-message:
      prefix: "chore(ci)"
      include: "scope"
    groups:
      actions:
        patterns:
          - "*"

  # 4) GitHub Actions: update marketplace actions referenced inside your composite actions (pipelines/**/action.yml)
  #    If you see duplicate PRs with the entry above, remove this block and keep only directory: "/".
  - package-ecosystem: "github-actions"
    directory: "/pipelines"
    target-branch: "main"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "06:25"
      timezone: "Europe/Skopje"
    open-pull-requests-limit: 10
    labels: ["dependencies", "github-actions"]
    commit-message:
      prefix: "chore(ci)"
      include: "scope"
    groups:
      pipelines-actions:
        patterns:
          - "*"
